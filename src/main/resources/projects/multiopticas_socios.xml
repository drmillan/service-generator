<!-- ################################################################ XML 
	DE DEFINICIÓN DE SERVICIOS MULTIOPTICAS_SOCIOS ################################################################ -->

<protocol>
	<messages>
		<!-- ###################################### LOGIN ###################################### -->
		<message name="Login" service="MO" method="login" description=""
			type="Post">
			<urlPattern>
				<url address="http://${SERVER}/login" />
			</urlPattern>
			<request>
				<field name="activationCode" type="String" description="Codigo de activacion" />
			</request>
			<response>
				<field name="status" type="String" description="OK, NO_OK" />
				<field name="statusMessage" type="String" description="Descripción del error en caso de error" />
				<field name="appId" type="String" description="Id de aplicación" />
				<field name="memberId" type="String" description="Id de socio" />
			</response>
		</message>
		<!-- ###################################### REMOVE ORDER ###################################### -->
		<message name="RemoveOrder" service="MO" method="removeOrder"
			description="" type="Delete">
			<urlPattern>
				<url address="http://${SERVER}/order/delete" />
			</urlPattern>
			<request>
				<field name="appId" type="String" description="Id de aplicación" />
				<field name="memberId" type="String" description="Id de socio" />
				<field name="orderId" type="int" description="Id del pedido" />
			</request>
			<response>
				<field name="status" type="String" description="OK, NO_OK" />
				<field name="statusMessage" type="String" description="Descripción del error en caso de error" />
			</response>
		</message>
		<!-- ###################################### ORDER HISTORY ############################## -->
		<message name="OrderHistory" service="MO" method="orderHistory"
			description="" type="Get">
			<urlPattern>
				<url address="http://${SERVER}/order/history" />
			</urlPattern>
			<request>
				<field name="appId" type="String" description="Id de aplicación" />
				<field name="memberId" type="String" description="Id de miembro" />
				<field name="date" type="String" description="Fecha de filtro (dd/MM/yyyy)" />
				<field name="name" type="String" description="Nombre de filtrado" />
				<field name="email" type="String" description="Email de filtrado" />
				<field name="phoneNumber" type="String" description="Número de teléfono de filtrado" />
			</request>
			<response>
				<field name="status" type="String" description="OK, NO_OK" />
				<field name="statusMessage" type="String" description="Descripción del error en caso de error" />
				<field name="orders" type="OrderDTO*" description="Pedidos" />
			</response>
		</message>
		<!-- ###################################### PRODUCT ############################## -->
		<message name="UpdateDB" service="MO" method="updateDB"
			description="" type="Get">
			<urlPattern>
				<url address="http://${SERVER}/db/update" />
			</urlPattern>
			<request>
				<field name="appId" type="String" description="Id de aplicación" />
				<field name="memberId" type="String" description="Id de miembro" />
			</request>
			<response>
				<field name="status" type="String" description="OK/NO_OK" />
				<field name="statusMessage" type="String" description="Mensaje a mostrar al usuario en caso de error" />
				<field name="promos" type="PromoDTO*" description="Listado de campañas" />
				<field name="lensTypes" type="LensTypeDTO*" description="Listado de tipos de lentes" />
				<field name="lensTreatments" type="LensTreatmentDTO*" description="Listado de tratamientos" />
				<field name="crossSells" type="CrossSellDTO*" description="Listado de ventas cruzadas" />
				<field name="warranties" type="WarrantyDTO*" description="Lista de garantías" />
			</response>
		</message>
		<!-- ###################################### SAVE ORDER ###################################### -->
		<message name="SaveOrder" service="MO" method="saveOrder"
			description="" type="Post">
			<urlPattern>
				<url address="http://${SERVER}/order/save" />
			</urlPattern>
			<request>
				<field name="appId" type="String" description="Id de aplicación" />
				<field name="memberId" type="String" description="Id de socio" />
				<field name="orderId_MO" type="int" description="Id del pedido" />
				<field name="name" type="String" description="Nombre del cliente" />
				<field name="email" type="String" description="Email del cliente" />
				<field name="phoneNumber" type="String" description="Telefono del cliente" />
				<field name="comments" type="String" description="Observaciones" />
				<field name="date" type="long" description="Fecha" />
				<field name="promoId_MO" type="int" description="Id de la promocion" />
				<field name="promoName" type="String" description="Nombre de la promocion" />
				<field name="frameId_MO" type="int" description="Id de la montura" />
				<field name="frameName" type="String" description="Nombre de la montura" />
				<field name="framePrice" type="double" description="Precio de la montura" />
				<field name="variantId_MO" type="int" description="Id de la variante" />
				<field name="variantName" type="String" description="Nombre de la variante" />
				<field name="variantPrice" type="double" description="Precio de la variante" />
				<field name="lensTypeId_MO" type="int" description="Id del tipo de lente" />
				<field name="lensTypeName" type="String" description="Nombre del tipo de lente" />
				<field name="lensTypePrice" type="double" description="Precio del tipo de lente" />
				<field name="lensEquipmentId_MO" type="int" description="Id del equipamiento de la lente" />
				<field name="lensEquipmentName" type="String" description="Nombre del equipamiento de la lente" />
				<field name="lensEquipmentPrice" type="double" description="Precio del equipamiento de la lente" />
				<field name="treatmentOneId_MO" type="int" description="Id del tratamiento" />
				<field name="treatmentOneName" type="String" description="Nombre del tratamiento" />
				<field name="treatmentOnePrice" type="double" description="Precio del tratamiento" />
				<field name="treatmentTwoId_MO" type="int" description="Id del tratamiento" />
				<field name="treatmentTwoName" type="String" description="Nombre del tratamiento" />
				<field name="treatmentTwoPrice" type="double" description="Precio del tratamiento" />
				<field name="treatmentSunId_MO" type="int" description="Id del tratamiento" />
				<field name="treatmentSunName" type="String" description="Nombre del tratamiento" />
				<field name="treatmentSunPrice" type="double" description="Precio del tratamiento" />
				<field name="crossSellId_MO" type="int" description="Id de la venta cruzada" />
				<field name="crossSellName" type="String" description="Nombre de la venta cruzada" />
				<field name="crossSellPrice" type="double" description="Precio de la venta cruzada" />
				<field name="crossSellDetailId_MO" type="int" description="Id del detalle de la venta cruzada" />
				<field name="crossSellDetailName" type="String" description="Nombre del detalle de la venta cruzada" />
				<field name="crossSellDetailPrice" type="double" description="Precio del detalle de la venta cruzada" />
				<field name="warrantyId_MO" type="int" description="Id de la garantia" />
				<field name="warrantyName" type="String" description="Nombre de la garantia" />
				<field name="warrantyPrice" type="double" description="Precio de la garantia" />
				<field name="secondFrameId_MO" type="int" description="Id de la montura" />
				<field name="secondFrameName" type="String" description="Nombre de la montura" />
				<field name="secondFramePrice" type="double" description="Precio de la montura" />
				<field name="secondVariantId_MO" type="int" description="Id de la variante" />
				<field name="secondVariantName" type="String" description="Nombre de la variante" />
				<field name="secondVariantPrice" type="double" description="Precio de la variante" />
				<field name="secondTreatmentOneId_MO" type="int" description="Id del tratamiento" />
				<field name="secondTreatmentOneName" type="String" description="Nombre del tratamiento" />
				<field name="secondTreatmentOnePrice" type="double" description="Precio del tratamiento" />
				<field name="secondTreatmentTwoId_MO" type="int" description="Id del tratamiento" />
				<field name="secondTreatmentTwoName" type="String" description="Nombre del tratamiento" />
				<field name="secondTreatmentTwoPrice" type="double" description="Precio del tratamiento" />
				<field name="secondTreatmentSunId_MO" type="int" description="Id del tratamiento" />
				<field name="secondTreatmentSunName" type="String" description="Nombre del tratamiento" />
				<field name="secondTreatmentSunPrice" type="double" description="Precio del tratamiento" />
				<field name="secondWarrantyId_MO" type="int" description="Id de la garantia" />
				<field name="secondWarrantyName" type="String" description="Nombre de la garantia" />
				<field name="secondWarrantyPrice" type="double" description="Precio de la garantia" />
				<field name="totalPrice" type="double" description="Precio total" />
			</request>
			<response>
				<field name="status" type="String" description="OK, NO_OK" />
				<field name="statusMessage" type="String" description="Descripción del error en caso de error" />
				<field name="orderId_MO" type="String" description="Identificador del pedido guardado" />
			</response>
		</message>
	</messages>
	<types>
		<type name="PromoDTO">
			<field name="promoId" type="int" description="Id de campaña" />
			<field name="imageURL" type="String" description="URL completa de la imagen de campaña" />
			<field name="name" type="String" description="Título de la campaña" />
			<field name="description" type="String" description="Descripción de la campaña" />
			<field name="frame" type="FrameDTO*" description="Lista de monturas" />
		</type>
		<type name="FrameDTO">
			<field name="frameId" type="int" description="id de la montura" />
			<field name="reference" type="int" description="Referencia" />
			<field name="price" type="double" description="Precio de la montura" />
			<field name="order" type="int" description="Orden en el listado" />
			<field name="sun" type="boolean" description="Indicativo si SOL" />
			<field name="prescription" type="boolean" description="Indicativo si graduadas" />
			<field name="gender" type="String" description="Descripción de sexo" />
			<field name="age" type="String" description="Descripción de edad" />
			<field name="material" type="String" description="Material" />
			<field name="size" type="String" description="Calibre" />
			<field name="collection" type="String" description="Colección" />
			<field name="variants" type="VariantDTO*" description="Variantes" />
		</type>
		<type name="VariantDTO">
			<field name="variantId" type="int" description="Id de la variante" />
			<field name="frameId" type="int" description="Id de la montura" />
			<field name="color" type="String" description="Nombre del color" />
			<field name="webColor" type="String" description="Nombre del color (Web)" />
			<field name="mainVariant" type="boolean" description="Indicativo si la variante es la principal para esta montura" />
			<field name="images" type="VariantImageDTO*" description="Imágenes de la variante" />
		</type>
		<type name="VariantImageDTO">
			<field name="variantId" type="int" description="id de la variante" />
			<field name="frameId" type="int" description="id de la montura" />
			<field name="imageId" type="int" description="id de la imagen" />
			<field name="imageURL" type="String" description="URL absoluta de la imagen" />
			<field name="isPrincipal" type="boolean" description="Indicativo de si la imagen es la principal para esta variante" />
		</type>
		<type name="LensTypeDTO">
			<field name="lensTypeId" type="int" description="id del tipo de lente" />
			<field name="name" type="String" description="Nombre del tipo de lente (monofocal , progresivo)" />
			<field name="description" type="String" description="Descripción del tipo de lente" />
			<field name="price" type="double" description="precio del tipo de lente" />
			<field name="imageURL" type="String" description="URL absoluta de la imagen" />
		</type>
		<type name="LensEquipmentDTO">
			<field name="lensEquipmentId_MO" type="int" description="id del tipo de lente" />
			<field name="name" type="String" description="Nombre del tipo de lente (monofocal , progresivo)" />
			<field name="description" type="String" description="Descripción del tipo de lente" />
			<field name="price" type="double" description="precio del tipo de lente" />
			<field name="imageURL" type="String" description="URL absoluta de la imagen" />
			<field name="lastUpdate" type="double" description="Fecha de la última actualización de la imagen" />
		</type>
		<type name="TreatmentDTO">
			<field name="treatmentId_MO" type="int" description="id del tratamiento" />
			<field name="treatmentType" type="String" description="Tipo de tratamiento (1,2,SOL)" />
			<field name="name" type="String" description="Nombre del tratamiento" />
			<field name="description" type="String" description="Descripción del tratamiento" />
			<field name="imageURL" type="String" description="URL absoluta de la imagen" />
			<field name="price" type="double" description="precio del tratamiento" />
			<field name="lastUpdate" type="Date" description="Fecha de la última actualización de la imagen" />
		</type>
		<type name="CrossSellDTO">
			<field name="crossSellId" type="int" description="Id de venta cruzada" />
			<field name="crossSellType" type="String" description="Tipo de venta cruzada (SOL,MO,SOL_MODA,COMBILENTILLAS)" />
			<field name="name" type="String" description="Nombre de la venta cruzada" />
			<field name="description" type="String" description="Descripción de la venta cruzada" />
			<field name="imageURL" type="String" description="URL absoluta de la imagen" />
			<field name="price" type="String" description="Coste adicional de la venta cruzada" />
			<field name="crossSellMOs" type="CrossSellMODTO" description="Array de ventas cruzadas MO" />
			<field name="crossSellContactLenses" type="CrossSellContactLensDTO" description="Array de tipos de lentillas" />
		</type>
		<type name="CrossSellDetailDTO">
			<field name="crossSellDetailId" type="int" description="Id del detalle de venta cruzada" />
			<field name="name" type="String" description="Nombre de la venta cruzada" />
			<field name="crossSellDetailType" type="String" description="Tipo de detalle de venta cruzada" />
			<field name="description" type="String" description="Descripción del detalle de la venta cruzada" />
			<field name="price" type="double" description="Coste adicional" />
			<field name="priceType" type="String" description="Tipo de precio a aplicar: Porcentaje o Absoluto" />
			<field name="imageURL" type="String" description="URL absoluta de la imagen" />
			<field name="lastUpdate" type="Date" description="Fecha de la última actualización de la imagen" />
			<field name="crossSellId_MO" type="int" description="Id de la venta cruzada" />
		</type>
		<!--
		<type name="CrossSellMODTO">
			<field name="crossSellId" type="int" description="Id de venta cruzada" />
			<field name="crossSellMOId" type="int" description="Id de venta cruzada MO" />
			<field name="crossSellMOType" type="String" description="Tipo de venta cruzada MO (ECO_PLUS, PLUS_ESPECIAL,BASICA)" />
			<field name="price" type="double" description="Coste adicional" />
			<field name="imageURL" type="String" description="URL absoluta de la imagen" />
		</type>
		<type name="CrossSellContactLensDTO">
			<field name="crossSellId" type="int" description="Id de venta cruzada" />
			<field name="crossSellContactLensId" type="int" description="id de venta cruzada de lentillas" />
			<field name="crossSellContactLensType" type="String" description="Tipo de lentilla (SEMESTRAL, DIARIA)" />
			<field name="price" type="double" description="Coste adicional" />
			<field name="imageURL" type="String" description="URL absoluta de la imagen" />
		</type>
		-->
		<type name="WarrantyDTO">
			<field name="warrantyId" type="int" description="id de tipo de garantía" />
			<field name="name" type="String" description="Nombre de la garantía" />
			<field name="description" type="String" description="Descripción de la garantía" />
			<field name="imageURL" type="String" description="URL absoluta de la imagen" />
			<field name="price" type="double" description="Coste adicional" />
		</type>
		<type name="OrderDTO">
			<field name="name" type="String" description="Nombre del cliente" />
			<field name="email" type="String" description="Email del cliente" />
			<field name="phoneNumber" type="String" description="Teléfono del cliente" />
			<field name="comments" type="String" description="Comentarios" />
			<field name="date" type="long" description="Fecha del pedido (milisegundos desde 01/01/1970)" />
			<field name="promo" type="PromoDTO*" description="Campaña seleccionada" />
			<field name="frame" type="FrameDTO*" description="Montura seleccionada" />
			<field name="variant" type="VariantDTO*" description="Variante de la montura seleccionada" />
			<field name="lensType" type="LensTypeDTO*" description="Tipo de lente" />
			<field name="lensEquipment" type="LensEquipmentDTO*" description="Tipo de lente" />
			<field name="treatmentOne" type="TreatmentDTO*" description="Tratamiento 1" />
			<field name="treatmentTwo" type="TreatmentDTO*" description="Tratamiento 2" />
			<field name="treatmentSun" type="TreatmentDTO*" description="Tratamiento Sol" />
			<field name="crossSell" type="CrossSellDTO*" description="Venta cruzada" />
			<field name="crossSellDetail" type="CrossSellDetailDTO*" description="Detalle de venta cruzada" />
			<field name="warranty" type="WarrantyDTO*" description="Garantia" />
			<field name="secondFrame" type="FrameDTO*" description="Segunda montura" />
			<field name="secondVariant" type="VariantDTO*" description="Variante de la segunda montura" />
			<field name="secondTreatmentOne" type="TreatmentDTO*" description="Segundo tratamiento 1" />
			<field name="secondTreatmentTwo" type="TreatmentDTO*" description="Segundo tratamiento 2" />
			<field name="secondTreatmentSun" type="TreatmentDTO*" description="Segundo tratamiento Sol" />
			<field name="secondWarranty" type="WarrantyDTO*" description="Segunda garantia" />
			<field name="totalPrice" type="double" description="Precio total" />
		</type>
	</types>
</protocol>